<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infinite Rhythm Trainer</title>
    <link rel="stylesheet" href="style.css?v=1.0.3" />
    <script src="main.js?v=1.0.3" defer></script>
  </head>
  <body>
    <main class="app">
      <section class="game">
        <label>
          Level: <span id="levelValue">1</span>
          <input id="level" type="range" min="1" max="10" step="1" value="1" />
        </label>

        <button id="startStop" type="button">Start</button>

        <button id="tapZone" class="tap-zone" aria-label="Tap input zone">
          <span>TAP</span>
        </button>
      </section>

      <section class="controls card">
        <label>
          Input latency offset (ms): <span id="latencyValue">15</span>
          <input id="latency" type="range" min="0" max="200" step="5" value="15" />
        </label>

        <p id="calibrationResult" class="calibration-result">Calibration non lanc√©e.</p>

        <div class="control-buttons">
          <button id="calibration" type="button">Calibration</button>
          <button id="clearCache" type="button">Reset parameters</button>
        </div>
      </section>

      <details class="probabilities card" id="probabilitiesPanel">
        <summary>Settings</summary>

        <label>
          Hit window (ms): <span id="hitWindowDisplay">250</span>
          <input id="hitWindow" type="range" min="250" max="250" step="1" value="250" />
        </label>

        <label>
          Hit tolerance: <span id="hitToleranceDisplay">50 (125 ms)</span>
          <input id="hitTolerance" type="range" min="0" max="100" step="1" value="50" />
        </label>

        <fieldset>
          <legend>BPM by level endpoints</legend>
          <div class="dual-slider-row">
            <label>
              BPM @ lvl 1: <span id="bpmLevel1Value">70</span>
              <input id="bpmLevel1" type="range" min="40" max="120" step="1" value="70" />
            </label>
            <label>
              BPM @ lvl 10: <span id="bpmLevel10Value">110</span>
              <input id="bpmLevel10" type="range" min="40" max="120" step="1" value="110" />
            </label>
          </div>
          <p class="computed-setting">Interpolated BPM: <span id="bpmValue">90</span></p>
        </fieldset>

        <fieldset>
          <legend>First hit index weights</legend>
          <div class="dual-slider-row">
            <label>
              Index 2 @ lvl 1: <span id="weightFirst2Level1Value">5</span>
              <input id="weightFirst2Level1" type="range" min="0" max="10" step="1" value="5" />
            </label>
            <label>
              Index 2 @ lvl 10: <span id="weightFirst2Level10Value">5</span>
              <input id="weightFirst2Level10" type="range" min="0" max="10" step="1" value="5" />
            </label>
          </div>
          <div class="dual-slider-row">
            <label>
              Index 3 @ lvl 1: <span id="weightFirst3Level1Value">10</span>
              <input id="weightFirst3Level1" type="range" min="0" max="10" step="1" value="10" />
            </label>
            <label>
              Index 3 @ lvl 10: <span id="weightFirst3Level10Value">10</span>
              <input id="weightFirst3Level10" type="range" min="0" max="10" step="1" value="10" />
            </label>
          </div>
          <div class="dual-slider-row">
            <label>
              Index 4 @ lvl 1: <span id="weightFirst4Level1Value">5</span>
              <input id="weightFirst4Level1" type="range" min="0" max="10" step="1" value="5" />
            </label>
            <label>
              Index 4 @ lvl 10: <span id="weightFirst4Level10Value">5</span>
              <input id="weightFirst4Level10" type="range" min="0" max="10" step="1" value="5" />
            </label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Jump size weights</legend>
          <div class="dual-slider-row">
            <label>
              Jump 1 @ lvl 1: <span id="weightJump1Level1Value">1</span>
              <input id="weightJump1Level1" type="range" min="0" max="10" step="1" value="1" />
            </label>
            <label>
              Jump 1 @ lvl 10: <span id="weightJump1Level10Value">1</span>
              <input id="weightJump1Level10" type="range" min="0" max="10" step="1" value="1" />
            </label>
          </div>
          <div class="dual-slider-row">
            <label>
              Jump 2 @ lvl 1: <span id="weightJump2Level1Value">10</span>
              <input id="weightJump2Level1" type="range" min="0" max="10" step="1" value="10" />
            </label>
            <label>
              Jump 2 @ lvl 10: <span id="weightJump2Level10Value">10</span>
              <input id="weightJump2Level10" type="range" min="0" max="10" step="1" value="10" />
            </label>
          </div>
          <div class="dual-slider-row">
            <label>
              Jump 3 @ lvl 1: <span id="weightJump3Level1Value">10</span>
              <input id="weightJump3Level1" type="range" min="0" max="10" step="1" value="10" />
            </label>
            <label>
              Jump 3 @ lvl 10: <span id="weightJump3Level10Value">10</span>
              <input id="weightJump3Level10" type="range" min="0" max="10" step="1" value="10" />
            </label>
          </div>
          <div class="dual-slider-row">
            <label>
              Jump 4 @ lvl 1: <span id="weightJump4Level1Value">1</span>
              <input id="weightJump4Level1" type="range" min="0" max="10" step="1" value="1" />
            </label>
            <label>
              Jump 4 @ lvl 10: <span id="weightJump4Level10Value">1</span>
              <input id="weightJump4Level10" type="range" min="0" max="10" step="1" value="1" />
            </label>
          </div>
          <div class="dual-slider-row">
            <label>
              Jump 5 @ lvl 1: <span id="weightJump5Level1Value">1</span>
              <input id="weightJump5Level1" type="range" min="0" max="10" step="1" value="1" />
            </label>
            <label>
              Jump 5 @ lvl 10: <span id="weightJump5Level10Value">1</span>
              <input id="weightJump5Level10" type="range" min="0" max="10" step="1" value="1" />
            </label>
          </div>
        </fieldset>
      </details>

      <details class="card test-log-panel">
        <summary>Test log</summary>
        <pre id="testLog" class="test-log">Le log des erreurs s'affichera ici pendant la phase TAP.</pre>
      </details>
    </main>
  </body>
</html>
